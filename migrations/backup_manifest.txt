===============================================================================
Synapse-Rust 迁移脚本清理记录
===============================================================================
清理日期: 2026-02-25
操作人员: 自动化清理脚本
===============================================================================

一、已删除的冗余迁移脚本（已整合到 unified_schema）
-------------------------------------------------------------------------------
1. 20260220000000_normalize_field_names.sql
   原因: 字段名规范化已整合到 00000000_unified_schema.sql

2. 20260220000002_normalize_timestamp_fields.sql
   原因: 时间戳字段规范化已整合到 00000000_unified_schema.sql

3. 20260220000003_fix_devices_table.sql
   原因: 设备表修复已整合到 00000000_unified_schema.sql

4. 20260220000004_fix_rooms_table.sql
   原因: 房间表修复已整合到 00000000_unified_schema.sql

5. 20260220000007_add_events_columns.sql
   原因: 事件列添加已整合到 00000000_unified_schema.sql

6. 20260222120000_unify_timestamp_naming.sql
   原因: 时间戳命名统一已整合到 00000000_unified_schema.sql

二、已删除的冗余回滚脚本
-------------------------------------------------------------------------------
1. rollback/20260220000099_rollback_normalize.sql
   原因: 对应的迁移脚本已删除，回滚脚本不再需要

2. rollback/20260220000099_rollback_normalize_v2.sql
   原因: 对应的迁移脚本已删除，回滚脚本不再需要

3. rollback/20260220000099_rollback_timestamp_fields.sql
   原因: 对应的迁移脚本已删除，回滚脚本不再需要

三、重命名的迁移脚本（解决版本号冲突）
-------------------------------------------------------------------------------
原文件名                                        -> 新文件名
-------------------------------------------------------------------------------
20260225000000_create_missing_tables.sql       -> 20260225000001_create_missing_tables.sql
20260225000000_create_ssss_tables.sql          -> 20260225000002_create_ssss_tables.sql
20260225000001_create_key_requests_table.sql   -> 20260225000003_create_key_requests_table.sql

四、当前迁移脚本列表
-------------------------------------------------------------------------------
00000000_unified_schema.sql                    - 主Schema（包含所有基础表）
20260220000005_create_room_memberships.sql     - 房间成员关系表
20260220000006_create_account_data_tables.sql  - 账户数据表
20260221000000_fix_e2ee_tables.sql             - E2EE表修复
20260221120000_add_threepids_table.sql         - 第三方ID表
20260224000000_create_olm_and_worker_tables.sql - OLM和Worker表
20260225000001_create_missing_tables.sql       - 缺失表创建
20260225000002_create_ssss_tables.sql          - SSSS表
20260225000003_create_key_requests_table.sql   - 密钥请求表
20260227000000_add_performance_indexes.sql     - 性能索引
20260228000000_add_foreign_key_constraints.sql - 外键约束
20260222130000_fix_thread_tables.sql           - 线程表修复

五、回滚脚本列表
-------------------------------------------------------------------------------
rollback/99999999_unified_rollback.sql         - 统一回滚脚本

===============================================================================
注意事项
===============================================================================
1. 如需恢复已删除的脚本，请从版本控制系统（Git）中恢复
2. 新的迁移脚本版本号应从 20260225000004 开始
3. 所有迁移脚本执行前请确保数据库备份

===============================================================================
